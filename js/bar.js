////////////////////////////////////////////////////////////////
// RULER
////////////////////////////////////////////////////////////////
var barWidth = 960;
var sWidth = $(window).width();

////////////////////////////////////////////////////////////////
// GET KEYPRESS RESPONSES
////////////////////////////////////////////////////////////////
//function onKeyDown(evt) {
//    if (evt.keyCode == 39) addBar(); // increase
//    else if (evt.keyCode == 37) subBar(); // decrease
//}

function onKeyUp(evt) {
    if (evt.keyCode == 39) addBar(); // increase
    else if (evt.keyCode == 37) subBar(); // decrease
}

// $(document).keydown(onKeyDown);
$(document).keyup(onKeyUp);

////////////////////////////////////////////////////////////////
// CREATE STAGE
////////////////////////////////////////////////////////////////
function makeStage(w,h) {
  var svg = d3.select(".container")
     .insert("center")
     .insert("svg")
     .attr("width", w)
     .attr("height", h);
  return svg;
}

////////////////////////////////////////////////////////////////
// CREATE BAR
////////////////////////////////////////////////////////////////
function drawBar(svg) {
	d3.selectAll("rect").remove();
	svg.append("svg:rect").
  	  attr("x", 0).
  	  attr("y", 25).
      attr("height", 25).
      attr("width", barWidth);
	return svg;
}

////////////////////////////////////////////////////////////////
// ADJUST BAR SIZE
////////////////////////////////////////////////////////////////
function addBar() {
	if (barWidth > 0) barWidth = barWidth + 10;
	drawBar(svg);
	console.log(barWidth);
}

function subBar() {
	if (barWidth > 10) barWidth = barWidth - 10;
	drawBar(svg);
	console.log(barWidth);
}

////////////////////////////////////////////////////////////////
// DRAW BAR
////////////////////////////////////////////////////////////////
var svg = makeStage(sWidth - 150,768);
drawBar(svg);